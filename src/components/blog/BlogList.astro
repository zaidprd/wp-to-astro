---
// src/components/blog/BlogList.astro
// KODE LENGKAP YANG SUDAH DIPERBAIKI

import BlogPost from '@components/blog/BlogPost.astro';
import { categories } from '../../data/categories';

interface Props {
    posts: any[];
    currentCategory?: string;
}

const { posts, currentCategory } = Astro.props;
const activeCategories = categories;
---

{/* 
    Elemen <section> pembungkus telah dihapus dari sini.
    Komponen ini sekarang akan dirender di dalam kontainer milik induknya.
*/}

<div
    class="mb-16 flex flex-col sm:flex-row sm:justify-between sm:items-end gap-6"
    data-aos="fade-in"
    data-aos-delay="100"
>
    <div class="w-full">
        <h2 class="text-lg font-semibold mb-4">Filter by Categories:</h2>
        <div class="flex flex-wrap gap-2">
            <a
                href="/blog"
                class={`px-4 sm:px-6 py-2 sm:py-3 leading-none rounded-md text-small flex items-center justify-center transition-colors border border-primary duration-200 ${
                    !currentCategory
                        ? 'bg-primary text-body-dark shadow-md'
                        : 'bg-background text-body-base hover:bg-background-light hover:text-body-light'
                }`}
            >
                Show All
            </a>
            {
                activeCategories.map((category) => (
                    <a
                        href={`/category/${category.slug}`}
                        class={`px-4 sm:px-6 py-2 sm:py-3 leading-none rounded-md text-small flex items-center justify-center transition-colors border border-primary duration-200 ${
                            currentCategory === category.name
                                ? 'bg-primary text-body-dark shadow-md'
                                : 'bg-background text-body-base hover:bg-background-light hover:text-body-light'
                        }`}
                        title={category.description}
                    >
                        {category.name}
                    </a>
                ))
            }
        </div>
    </div>
    <p class="text-small text-body-base text-left sm:text-right whitespace-nowrap">
        Showing <span class="font-bold text-primary">{posts.length}</span> posts
    </p>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    {
        posts.map((post, index) => (
            <div>
                <BlogPost
                    title={post.data.title}
                    excerpt={post.data.excerpt}
                    featuredImage={post.data.featuredImage}
                    publishDate={post.data.publishDate}
                    categories={post.data.categories || []}
                    slug={post.slug}
                    index={index}
                />
            </div>
        ))
    }
</div>

{posts.length === 0 && <p class="text-center text-gray-500 py-8">No posts found in this category.</p>}
