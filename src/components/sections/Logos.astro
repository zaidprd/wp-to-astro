---
import type { Logo } from '@data/logos';
import Eyebrow from '@components/ui/Eyebrow.astro';
import { Image } from 'astro:assets';
import { getPaddingClass, getBackgroundColor } from '@utils/styleUtils';
import type { PaddingSize, ThemeColor } from '@utils/styleUtils';

export interface Props {
    content: {
        eyebrow?: string;
        headline?: string;
        subheadline?: string;
        logos: Logo[]; // tetap pakai tipe Logo biar kompatibel
    };
    background?: ThemeColor;
    padding?: PaddingSize;
    paddingTop?: PaddingSize;
    paddingBottom?: PaddingSize;
}

const {
    content: { eyebrow, headline, subheadline, logos },
    background = 'base'
} = Astro.props;

const bgColor = getBackgroundColor(background);
const paddingClass = getPaddingClass({ 
    padding: Astro.props.padding,
    paddingTop: Astro.props.paddingTop,
    paddingBottom: Astro.props.paddingBottom 
});
---

<section class:list={["relative overflow-hidden", bgColor, paddingClass]}>
    <div class="site-container px-4 text-center mb-8">
        {eyebrow && (
            <Eyebrow 
                text={eyebrow} 
                background={background} 
                className="text-center"
            />
        )}
        {headline && <h2 class="text-2xl md:text-3xl font-semibold mt-2">{headline}</h2>}
        {subheadline && <p class="text-base opacity-80 mt-1">{subheadline}</p>}
    </div>

    <!-- Portofolio slide otomatis -->
    <div class="relative overflow-hidden">
        <div class="flex animate-scroll-slow gap-8">
            {logos.concat(logos).map((logo, index) => (
                <div 
                    class="flex-shrink-0 w-[400px] md:w-[500px] h-[220px] md:h-[300px] rounded-xl overflow-hidden shadow-lg"
                    aria-hidden={index >= logos.length ? "true" : "false"}
                >
                    <Image 
                        src={logo.src} 
                        alt={logo.alt}
                        class="w-full h-full object-contain transition-transform duration-500 hover:scale-105"
                        width={500}
                        height={300}
                    />
                </div>
            ))}
        </div>
    </div>

    <style>
        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .animate-scroll-slow {
            width: max-content;
            animation: scroll 60s linear infinite; /* lebih lambat biar smooth */
        }
    </style>
</section>
